## Запуск
1. Развернуть проект, создать .env
2. Заполнить переменные в .env:
   ```python
   # Пример
   POSTGRES_URL = "postgresql+asyncpg://user:password@db:5432/visits"
   SECRET_KEY = "299F4B2B6C0183AC3EFA8C3374B893CA6034B8D00FAEE0E9A79393A27B329D9F"
   ALGORITHM = "HS256"
   POSTGRES_USER="user"
   POSTGRES_PASSWORD="password"
   POSTGRES_DB="visits"
   ACCESS_TOKEN_EXPIRE_MINUTES = 30
   ```
4. Выполнить  `docker-compose up -d --build`


- Swagger
`http://localhost:8000/docs`


- Redoc
`http://localhost:8000/redoc`

## Задача

Создать систему API, которая включает:
1. Аутентификацию и управление пользователями.
2. Сбор и анализ статистики посещений страниц.

## Функциональные требования

### 2.1 Аутентификация пользователей

Система должна обеспечивать:
- Регистрацию пользователя (email, пароль, имя).
- Вход пользователя (выдача JWT-токена).
- Получение профиля текущего пользователя.
- Обновление данных профиля (имя, пароль).
- Выход пользователя (инвалидирование токена).
- Защиту эндпоинтов с помощью аутентификации.

**Требования к данным:**
- Пароли должны храниться в зашифрованном виде с использованием библиотеки `hashlib`.
- Для аутентификации использовать JWT с библиотекой `jwt`.
- Валидация входных данных должна выполняться с использованием `Pydantic`.

**Результат:**
- API возвращает токен при успешной аутентификации.
- Доступ к защищённым ресурсам возможен только с валидным токеном.
- Возможность обновления и удаления профиля пользователя.

### 2.2 Сбор статистики посещений

Система должна собирать и анализировать посещения страниц. Для страниц не нужен контент, можно просто прописать GET запросы с рандомными путями.

**Функциональность:**
- Логирование посещений (`user_id`, `page_url`, `timestamp`).
- Получение статистики по посещённым страницам.
- Фильтрация данных по `user_id`, `page_url`, дате.

**Результат:**
- API принимает информацию о каждом посещении страницы.
- Возвращает статистику по посещениям в разрезе пользователей и временных периодов.

## Технические требования

### 3.1 Производительность

1. Максимальная скорость ответа:
   - Хорошо: до 100 мс.
   - Нормально: до 300 мс.
   - Плохо: более 500 мс.

2. Одновременная обработка запросов:
   - Асинхронность, поддержка многопоточности.
   - Возможность предварительной загрузки данных в память.

### 3.2 Масштабируемость

- Возможность горизонтального масштабирования базы данных.
- Поддержка больших объемов данных (индексация, кеширование).
- Лёгкость интеграции с внешними сервисами через API.

### 3.3 Язык программирования и технологии

- Язык: Python 3.12.7
- Фреймворк: FastAPI
- База данных: PostgreSQL
- ORM: `asyncpg` или `SQLAlchemy` (async)
- Аутентификация: JWT (`PyJWT`)
- Хеширование паролей: `hashlib`

## Дополнительные функции

### 4.1 Администрирование

- Эндпоинты для просмотра всех пользователей и их активности.
- Логирование аутентификационных событий.

### 4.2 API документация

- Автоматическая документация с использованием Swagger (FastAPI OpenAPI).
  - `/scalar` (доп.библиотека `scalar_fastapi`) или `/docs`
